/*
 *  jQuery backgroundcover - v1.0.0
 *  jQuery plugin to make CSS3 'background-size: cover' even smarter.
 *  http://jqueryboilerplate.com
 *
 *  Made by Simon Ihmig
 *  Under MIT License
 */
!function(a,b){function c(b,c){this.$element=a(b),this.settings=a.extend({},e,this.$element.data(),c),this._defaults=e,this._name=d,this.init()}var d="backgroundcover",e={image:null,safearea:"0%,0%,100%,100%"};c.prototype={init:function(){function c(a){i.imageWidth=a.width,i.imageHeight=a.height,i.loaded=!0;var b=i.settings.safearea.split(",");i.safearea={x1:f(b[0],i.imageWidth),y1:f(b[1],i.imageHeight),x2:f(b[2],i.imageWidth),y2:f(b[3],i.imageHeight)},i.layout()}var d,e,f,g,h,i=this;if(this.image=this.settings.image,!this.image){if(d=this.$element.css("background-image"),!d)throw new Error("No background image available");if(e=d.match(/url\([\"\']?([^\"\']*)[\"\']?\)/i),!e)throw new Error("Background image could not be retrieved from CSS property");this.image=e[1]}this.mode="img",this.$img=a('<img src="'+this.image+'" />').css("position","absolute"),"static"===this.$element.css("position")&&this.$element.css("position","relative"),this.$element.css("background-image","none").css("overflow","hidden").prepend(this.$img),f=function(a,b){if("number"==typeof a)return a;if("function"==typeof a.trim&&(a=a.trim()),"%"===a.charAt(a.length-1)){var c=parseFloat(a);return Math.round(c/100*b)}return Math.round(parseFloat(a))},this.loaded=!1,g=new Image,g.onload=function(){c(this)},h=this.image,navigator.userAgent.match(/msie/i)&&(h+="?"+(new Date).valueOf()),g.src=h,g.complete&&c(g),a(b).resize(function(){i.layout()})},layout:function(){if(this.loaded){var a,b,c,d,e,f,g,h,i,j=this.$element.width(),k=this.$element.height(),l=j/k,m=this.safearea.x1,n=this.safearea.y1,o=this.safearea.x2,p=this.safearea.y2,q=o-m,r=p-n,s=this.imageWidth,t=this.imageHeight,u=s/t,v=q/s,w=r/t;l>u?(a=j,b=Math.round(a/u),i=a/s,r*i>k&&(b=Math.round(k/w),a=Math.round(b*u),i=a/s)):(b=k,a=Math.round(b*u),i=a/s,q*i>j&&(a=Math.round(j/v),b=Math.round(a/u),i=a/s)),d=(b-k)/2,c=(a-j)/2,f=n*i-d,h=b-p*i-d,0>f?d+=f:0>h&&(d-=h),e=m*i-c,g=a-o*i-c,0>e?c+=e:0>g&&(c-=g),c=Math.round(-c),d=Math.round(-d),this._update(a,b,c,d)}},_update:function(a,b,c,d){"css"===this.mode?this.$element.css("background-position",c+"px "+d+"px").css("background-size",a+"px "+b+"px"):"img"===this.mode&&this.$img.css("width",a+"px").css("height",b+"px").css("top",d+"px").css("left",c+"px")}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);